<!doctype html>
<html lang="id" class="">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#667eea" />
		<meta
			name="description"
			content="Program pelatihan intensif developer - Naik Kelas by Koneksi"
		/>

		<!-- Favicon and Icons -->
		<link rel="icon" href="/favicon.ico" />
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
		<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png" />

		<!-- Apple Touch Icons -->
		<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png" />
		<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png" />
		<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png" />
		<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png" />
		<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png" />
		<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png" />
		<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png" />
		<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png" />
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png" />
		<link rel="apple-touch-icon" href="/apple-icon.png" />

		<!-- Android Icons -->
		<link rel="icon" type="image/png" sizes="36x36" href="/android-icon-36x36.png" />
		<link rel="icon" type="image/png" sizes="48x48" href="/android-icon-48x48.png" />
		<link rel="icon" type="image/png" sizes="72x72" href="/android-icon-72x72.png" />
		<link rel="icon" type="image/png" sizes="96x96" href="/android-icon-96x96.png" />
		<link rel="icon" type="image/png" sizes="144x144" href="/android-icon-144x144.png" />
		<link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png" />

		<!-- Microsoft Icons -->
		<meta name="msapplication-TileColor" content="#667eea" />
		<meta name="msapplication-TileImage" content="/ms-icon-144x144.png" />
		<meta name="msapplication-config" content="/browserconfig.xml" />

		<!-- PWA Manifest -->
		<link rel="manifest" href="/manifest.json" />

		<!-- Mobile Web App -->
		<meta name="mobile-web-app-capable" content="yes" />

		<!-- Apple Mobile Web App -->
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta name="apple-mobile-web-app-title" content="Naik Kelas" />

		<!-- Structured Data -->
		<script type="application/ld+json">
			{
				"@context": "https://schema.org",
				"@type": "EducationalOrganization",
				"name": "Naik Kelas by Koneksi",
				"description": "Program pelatihan intensif developer",
				"url": "https://learning.konxc.space",
				"logo": "https://learning.konxc.space/apple-icon-180x180.png",
				"sameAs": [],
				"offers": {
					"@type": "Offer",
					"category": "Programming Course"
				}
			}
		</script>
		<script
			defer
			src="https://cloud.umami.is/script.js"
			data-website-id="7af81a1a-5d3d-4355-af3b-31d9076f74ae"
		></script>

		<!-- Blocking theme script - prevents FOUC by running before any rendering -->
		<script>
			(function () {
				// Immediately check theme before any rendering occurs
				try {
					// Parse cookie
					const cookieMatch = document.cookie.match(/nk-theme=([^;]+)/);
					const cookieTheme = cookieMatch ? cookieMatch[1] : null;

					// Check localStorage (faster than cookie parsing)
					let storedTheme = null;
					try {
						storedTheme = localStorage.getItem('nk-theme');
					} catch (e) {}

					// Priority: localStorage > cookie > system
					const theme = storedTheme || cookieTheme || 'system';

					// Validate theme value
					const validTheme =
						theme === 'light' || theme === 'dark' || theme === 'system' ? theme : 'system';

					// Determine if dark mode
					const systemDark = window.matchMedia?.('(prefers-color-scheme: dark)').matches ?? false;
					const isDark = validTheme === 'dark' || (validTheme === 'system' && systemDark);

					// Apply immediately - this blocks rendering until complete
					if (isDark) {
						document.documentElement.classList.add('dark');
					} else {
						document.documentElement.classList.remove('dark');
					}

					// Set sidebar collapsed state to prevent flicker
					try {
						const sidebarCollapsed = localStorage.getItem('sidebar-collapsed');
						if (sidebarCollapsed === 'true') {
							document.documentElement.setAttribute('data-sidebar-collapsed', 'true');
						} else {
							document.documentElement.setAttribute('data-sidebar-collapsed', 'false');
						}
					} catch (e) {
						// Silent fail - default to expanded
						document.documentElement.setAttribute('data-sidebar-collapsed', 'false');
					}
				} catch (e) {
					// Silent fail - fallback to system preference
					const systemDark = window.matchMedia?.('(prefers-color-scheme: dark)').matches ?? false;
					if (systemDark) {
						document.documentElement.classList.add('dark');
					}
					// Default sidebar to expanded
					document.documentElement.setAttribute('data-sidebar-collapsed', 'false');
				}
			})();
		</script>

		%sveltekit.head%
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">%sveltekit.body%</div>
	</body>
</html>
